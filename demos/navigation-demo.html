<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¼èˆªç³»ç»Ÿæ¼”ç¤º - AIç¼–ç¨‹å·¥å…·ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="../src/styles/main.css">
    <link rel="stylesheet" href="../src/styles/theme-switcher.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- ä¸»é¢˜é¢„åŠ è½½è„šæœ¬ï¼Œé˜²æ­¢ä¸»é¢˜é—ªçƒ -->
    <script>
        (function() {
            try {
                // ç«‹å³è¯»å–å¹¶åº”ç”¨ä¿å­˜çš„ä¸»é¢˜ï¼Œé¿å…é—ªçƒ
                const savedTheme = localStorage.getItem('ai-tools-theme');
                if (savedTheme && savedTheme !== 'default') {
                    // ç«‹å³æ·»åŠ ä¸»é¢˜ç±»åˆ°htmlå…ƒç´ 
                    document.documentElement.className = 'theme-' + savedTheme;
                    
                    // ç«‹å³åˆ›å»ºå¹¶æ·»åŠ ä¸»é¢˜CSSé“¾æ¥
                    const themeLink = document.createElement('link');
                    themeLink.id = 'theme-css-preload';
                    themeLink.rel = 'stylesheet';
                    themeLink.href = '../src/themes/' + savedTheme + '/theme.css';
                    document.head.appendChild(themeLink);
                }
            } catch (e) {
                // é™é»˜å¤„ç†é”™è¯¯ï¼Œä¸å½±å“é¡µé¢åŠ è½½
                console.warn('ä¸»é¢˜é¢„åŠ è½½å¤±è´¥:', e);
            }
        })();
    </script>
    
    <style>
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .demo-container {
            max-width: 1200px;
            margin: 100px auto 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        .demo-title {
            text-align: center;
            color: #333;
            margin-bottom: 2rem;
        }
        
        .demo-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .demo-section h3 {
            color: #495057;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .feature-list li::before {
            content: 'âœ…';
            font-size: 1rem;
        }
        
        .control-panel {
            background: #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .control-group {
            display: flex;
            gap: 1rem;
            margin: 0.5rem 0;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-group label {
            font-weight: 500;
            min-width: 100px;
        }
        
        .control-group button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .control-group button:hover {
            background: #0056b3;
        }
        
        .status-display {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            padding: 0.75rem;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .test-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .test-info strong {
            color: #856404;
        }
        
        @media (max-width: 768px) {
            .demo-container {
                margin: 20px auto 0;
                padding: 1rem;
            }
            
            .control-group {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <!-- é¡µé¢å¤´éƒ¨ -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <span>AIç¼–ç¨‹å·¥å…·ä¸­å¿ƒ</span>
                </div>
                <nav class="main-nav">
                    <!-- å¯¼èˆªå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </nav>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- æ¼”ç¤ºå†…å®¹ -->
    <div class="demo-container">
        <h1 class="demo-title">
            <i class="fas fa-compass"></i>
            å¯¼èˆªç³»ç»Ÿæ¼”ç¤º
        </h1>

        <!-- åŠŸèƒ½ä»‹ç» -->
        <div class="demo-section">
            <h3><i class="fas fa-star"></i> æ ¸å¿ƒåŠŸèƒ½</h3>
            <ul class="feature-list">
                <li>é…ç½®åŒ–å¯¼èˆªç³»ç»Ÿï¼Œæ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤åŠŸèƒ½æŒ‰é’®</li>
                <li>å®Œå–„çš„ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡å’Œä¸‹æ‹‰èœå•</li>
                <li>æ™ºèƒ½çš„ä¼˜å…ˆçº§ç®¡ç†ï¼Œç§»åŠ¨ç«¯è‡ªåŠ¨éšè—ä½ä¼˜å…ˆçº§é¡¹ç›®</li>
                <li>å¼€å‘å°å·¥å…·ä¸‹æ‹‰èœå•ï¼Œæ”¯æŒåˆ†ç±»ç®¡ç†</li>
                <li>æœç´¢åŠŸèƒ½é›†æˆï¼Œæ”¯æŒç§»åŠ¨ç«¯ä¼˜åŒ–</li>
                <li>é”®ç›˜å¿«æ·é”®æ”¯æŒï¼ˆESCå…³é—­èœå•ï¼‰</li>
                <li>å¹³æ»‘åŠ¨ç”»æ•ˆæœå’Œæ— éšœç¢è®¿é—®æ”¯æŒ</li>
            </ul>
        </div>

        <!-- æµ‹è¯•è¯´æ˜ -->
        <div class="test-info">
            <strong>æµ‹è¯•è¯´æ˜ï¼š</strong>
            <br>â€¢ è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æµ‹è¯•å“åº”å¼æ•ˆæœ
            <br>â€¢ åœ¨ç§»åŠ¨ç«¯ï¼ˆå®½åº¦ â‰¤ 768pxï¼‰ç‚¹å‡»å³ä¸Šè§’æ±‰å ¡èœå•å›¾æ ‡
            <br>â€¢ æ‚¬åœæˆ–ç‚¹å‡»"å¼€å‘å°å·¥å…·"æŸ¥çœ‹ä¸‹æ‹‰èœå•
            <br>â€¢ æŒ‰ESCé”®å…³é—­æ‰“å¼€çš„èœå•
            <br>â€¢ ä½¿ç”¨ä¸‹æ–¹æ§åˆ¶é¢æ¿æµ‹è¯•åŠ¨æ€é…ç½®åŠŸèƒ½
        </div>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="demo-section">
            <h3><i class="fas fa-sliders-h"></i> æ§åˆ¶é¢æ¿</h3>
            <div class="control-panel">
                <div class="control-group">
                    <label>å¯¼èˆªçŠ¶æ€ï¼š</label>
                    <button onclick="window.navDemo?.getStatus()">è·å–çŠ¶æ€</button>
                    <button onclick="window.navDemo?.toggleMobileMenu()">åˆ‡æ¢ç§»åŠ¨ç«¯èœå•</button>
                </div>
                
                <div class="control-group">
                    <label>æ–­ç‚¹æµ‹è¯•ï¼š</label>
                    <button onclick="window.navDemo.simulateResize(1200)">æ¡Œé¢ç«¯ (1200px)</button>
                    <button onclick="window.navDemo.simulateResize(768)">å¹³æ¿ç«¯ (768px)</button>
                    <button onclick="window.navDemo.simulateResize(480)">ç§»åŠ¨ç«¯ (480px)</button>
                </div>
                
                <div class="control-group">
                    <label>é…ç½®ç®¡ç†ï¼š</label>
                    <button onclick="window.navDemo.showConfig()">æŸ¥çœ‹é…ç½®</button>
                    <button onclick="window.navDemo.addTestItem()">æ·»åŠ æµ‹è¯•é¡¹</button>
                    <button onclick="window.navDemo.removeTestItem()">ç§»é™¤æµ‹è¯•é¡¹</button>
                </div>
            </div>
        </div>

        <!-- çŠ¶æ€æ˜¾ç¤º -->
        <div class="demo-section">
            <h3><i class="fas fa-info-circle"></i> çŠ¶æ€ä¿¡æ¯</h3>
            <div class="status-display" id="statusDisplay">
                ç­‰å¾…å¯¼èˆªç³»ç»Ÿåˆå§‹åŒ–...
            </div>
        </div>

        <!-- é…ç½®å±•ç¤º -->
        <div class="demo-section">
            <h3><i class="fas fa-cog"></i> å½“å‰é…ç½®</h3>
            <div class="status-display" id="configDisplay">
                ç‚¹å‡»"æŸ¥çœ‹é…ç½®"æŒ‰é’®æ˜¾ç¤ºå½“å‰å¯¼èˆªé…ç½®
            </div>
        </div>
    </div>

    <script type="module">
        import { NavigationManager } from '../src/js/managers/navigation-manager.js';
        import { 
            getEnabledNavigation, 
            getEnabledDevtools,
            MOBILE_CONFIG 
        } from '../src/js/config/navigation-config.js';

        class NavigationDemo {
            constructor() {
                this.navigationManager = null;
                this.testItemAdded = false;
            }

            async initialize() {
                try {
                    console.log('ğŸ¬ åˆå§‹åŒ–å¯¼èˆªæ¼”ç¤º...');
                    
                    // åˆå§‹åŒ–å¯¼èˆªç®¡ç†å™¨
                    this.navigationManager = new NavigationManager();
                    await this.navigationManager.initialize();
                    
                    // è®¾ç½®æ¼”ç¤ºæ§åˆ¶
                    this.setupDemoControls();
                    
                    // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                    this.updateStatusDisplay();
                    
                    console.log('âœ… å¯¼èˆªæ¼”ç¤ºåˆå§‹åŒ–å®Œæˆ');
                    
                } catch (error) {
                    console.error('âŒ å¯¼èˆªæ¼”ç¤ºåˆå§‹åŒ–å¤±è´¥:', error);
                    this.updateStatusDisplay('åˆå§‹åŒ–å¤±è´¥: ' + error.message);
                }
            }

            setupDemoControls() {
                // ç›‘å¬çª—å£å¤§å°å˜åŒ–
                window.addEventListener('resize', () => {
                    setTimeout(() => this.updateStatusDisplay(), 100);
                });
                
                // ç›‘å¬å¯¼èˆªçŠ¶æ€å˜åŒ–
                const observer = new MutationObserver(() => {
                    this.updateStatusDisplay();
                });
                
                const mainNav = document.querySelector('.main-nav');
                if (mainNav) {
                    observer.observe(mainNav, { 
                        attributes: true, 
                        attributeFilter: ['class'] 
                    });
                }
            }

            getStatus() {
                if (!this.navigationManager) {
                    console.log('âŒ å¯¼èˆªç®¡ç†å™¨æœªåˆå§‹åŒ–');
                    return;
                }
                
                const status = this.navigationManager.getStatus();
                console.log('ğŸ“Š å¯¼èˆªçŠ¶æ€:', status);
                this.updateStatusDisplay();
                return status;
            }

            toggleMobileMenu() {
                if (!this.navigationManager) {
                    console.log('âŒ å¯¼èˆªç®¡ç†å™¨æœªåˆå§‹åŒ–');
                    return;
                }
                
                // æ¨¡æ‹Ÿç‚¹å‡»ç§»åŠ¨ç«¯èœå•æŒ‰é’®
                const mobileBtn = document.querySelector('.mobile-menu-btn');
                if (mobileBtn) {
                    mobileBtn.click();
                    console.log('ğŸ“± åˆ‡æ¢ç§»åŠ¨ç«¯èœå•');
                }
            }

            simulateResize(width) {
                console.log(`ğŸ“ æ¨¡æ‹Ÿçª—å£å¤§å°å˜åŒ–: ${width}px`);
                
                // æš‚æ—¶ä¿®æ”¹çª—å£çš„ innerWidth å±æ€§
                Object.defineProperty(window, 'innerWidth', {
                    writable: true,
                    configurable: true,
                    value: width
                });
                
                // è§¦å‘ resize äº‹ä»¶
                window.dispatchEvent(new Event('resize'));
                
                // å»¶è¿Ÿæ¢å¤åŸå§‹å€¼
                setTimeout(() => {
                    Object.defineProperty(window, 'innerWidth', {
                        writable: true,
                        configurable: true,
                        value: document.documentElement.clientWidth
                    });
                    window.dispatchEvent(new Event('resize'));
                }, 3000);
                
                this.updateStatusDisplay();
            }

            showConfig() {
                const navigation = getEnabledNavigation();
                const devtools = getEnabledDevtools();
                
                const configInfo = {
                    ä¸»å¯¼èˆªé¡¹ç›®: navigation.length,
                    å¼€å‘å·¥å…·é¡¹ç›®: devtools.length,
                    ç§»åŠ¨ç«¯æ–­ç‚¹: MOBILE_CONFIG.breakpoint + 'px',
                    å¯¼èˆªé…ç½®: navigation.map(item => ({
                        åç§°: item.name,
                        ç±»å‹: item.type,
                        ä¼˜å…ˆçº§: item.mobile?.priority,
                        ç§»åŠ¨ç«¯æ˜¾ç¤º: item.mobile?.showInCollapsed
                    })),
                    å¼€å‘å·¥å…·é…ç½®: devtools.map(tool => ({
                        åç§°: tool.name,
                        åˆ†ç±»: tool.category,
                        é“¾æ¥: tool.href
                    }))
                };
                
                console.log('âš™ï¸ å¯¼èˆªé…ç½®:', configInfo);
                this.updateConfigDisplay(configInfo);
            }

            addTestItem() {
                if (this.testItemAdded) {
                    console.log('âš ï¸ æµ‹è¯•é¡¹ç›®å·²ç»æ·»åŠ ');
                    return;
                }
                
                console.log('â• æ·»åŠ æµ‹è¯•å¯¼èˆªé¡¹');
                
                // è¿™é‡Œå¯ä»¥æ‰©å±•ä¸ºçœŸæ­£çš„åŠ¨æ€æ·»åŠ åŠŸèƒ½
                // ç›®å‰åªæ˜¯æ¼”ç¤ºæ¦‚å¿µ
                const testItem = {
                    id: 'test-item',
                    name: 'æµ‹è¯•åŠŸèƒ½',
                    href: '#test',
                    icon: 'fas fa-flask',
                    type: 'internal',
                    order: 999,
                    enabled: true,
                    description: 'åŠ¨æ€æ·»åŠ çš„æµ‹è¯•åŠŸèƒ½',
                    mobile: {
                        priority: 'low',
                        showInCollapsed: false
                    }
                };
                
                if (this.navigationManager) {
                    this.navigationManager.addNavigationItem(testItem);
                    this.testItemAdded = true;
                    console.log('âœ… æµ‹è¯•é¡¹ç›®å·²æ·»åŠ ');
                }
            }

            removeTestItem() {
                if (!this.testItemAdded) {
                    console.log('âš ï¸ æ²¡æœ‰æµ‹è¯•é¡¹ç›®éœ€è¦ç§»é™¤');
                    return;
                }
                
                console.log('â– ç§»é™¤æµ‹è¯•å¯¼èˆªé¡¹');
                
                if (this.navigationManager) {
                    this.navigationManager.removeNavigationItem('test-item');
                    this.testItemAdded = false;
                    console.log('âœ… æµ‹è¯•é¡¹ç›®å·²ç§»é™¤');
                }
            }

            updateStatusDisplay(customMessage = null) {
                const statusElement = document.getElementById('statusDisplay');
                if (!statusElement) return;
                
                if (customMessage) {
                    statusElement.textContent = customMessage;
                    return;
                }
                
                if (!this.navigationManager) {
                    statusElement.textContent = 'å¯¼èˆªç®¡ç†å™¨æœªåˆå§‹åŒ–';
                    return;
                }
                
                const status = this.navigationManager.getStatus();
                const statusInfo = `
å¯¼èˆªçŠ¶æ€: ${status.initialized ? 'å·²åˆå§‹åŒ–' : 'æœªåˆå§‹åŒ–'}
ç§»åŠ¨ç«¯èœå•: ${status.mobileMenuOpen ? 'å·²æ‰“å¼€' : 'å·²å…³é—­'}
å½“å‰æ–­ç‚¹: ${status.currentBreakpoint}
çª—å£å®½åº¦: ${window.innerWidth}px
å¯¼èˆªé¡¹ç›®æ•°: ${status.navigationItems}
å¼€å‘å·¥å…·æ•°: ${status.devtoolItems}
æœ€åæ›´æ–°: ${new Date().toLocaleTimeString()}`;
                
                statusElement.textContent = statusInfo;
            }

            updateConfigDisplay(config) {
                const configElement = document.getElementById('configDisplay');
                if (!configElement) return;
                
                configElement.textContent = JSON.stringify(config, null, 2);
            }
        }

        // åˆ›å»ºå…¨å±€æ¼”ç¤ºå®ä¾‹
        window.navDemo = new NavigationDemo();

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            window.navDemo.initialize();
        });

        // å®šæ—¶æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        setInterval(() => {
            if (window.navDemo && window.navDemo.navigationManager) {
                window.navDemo.updateStatusDisplay();
            }
        }, 5000);
    </script>
</body>
</html> 